 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#1e1e1e;
  --panel:#2b2b2b;
  --border:#444;
  --text:#f0f0f0;
  --accent:#ffcc00;
}
.light{
  --bg:#f5f0e8;
  --panel:#e0d7cc;
  --border:#b6a99a;
  --text:#000;
  --accent:#6d4c41;
}
*{box-sizing:border-box}
body{margin:0;font-family:'Amiri',serif;background:var(--bg);color:var(--text);}
.app{display:flex;height:100vh;overflow:hidden;position:relative}

/* Sidebar */
.sidebar{
  width:260px;
  background:var(--panel);
  border-left:1px solid var(--border);
  padding:12px;
  overflow:auto;
  position:fixed;
  top:0;
  right:0;
  height:100vh;
  transform:translateX(100%);
  transition:transform .3s ease;
  z-index:1000;
}
.sidebar.open{transform:translateX(0);}
.sidebar h3{color:var(--accent);}
.sidebar button{
  width:100%;
  padding:10px;
  border:none;
  border-radius:8px;
  background:var(--accent);
  margin-bottom:10px;
  cursor:pointer;
}
.surah-item{
  padding:10px;
  border-bottom:1px solid var(--border);
  cursor:pointer;
}
.surah-item:hover{background:rgba(255,255,255,.08)}

/* Overlay */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.3);
  display:none;
  z-index:900;
}
.overlay.show{display:block;}

/* Content */
.content{flex:1;display:flex;flex-direction:column;position:relative}

/* Header */
.header{
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px;
  border-bottom:1px solid var(--border);
  position:relative;
  background:var(--bg);
  z-index:1050;
}
.menu-btn{
  background:var(--accent);
  border:none;
  border-radius:8px;
  padding:6px 10px;
  cursor:pointer;
  position:relative;
  z-index:1100; /* Ø¯Ø§ÙŠÙ…Ù‹Ø§ ÙÙˆÙ‚ */
}
.header-title{
  flex:1;
  text-align:center;
  font-size:22px;
  color:var(--accent);
}

/* Sticky Scroll Bar */
#scrollBar{
  position:sticky;
  top:0;
  background:var(--panel);
  padding:5px 10px;
  font-weight:bold;
  color:var(--accent);
  border-bottom:1px solid var(--border);
  z-index:1040;
  text-align:center;
}

/* Home - Tasbeeh */
.home{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
}
.tasbeeh{
  display:flex;
  gap:60px;
}
.circle-box{
  position:relative;
  width:220px;
  text-align:center;
}
.circle-box::after{
  content:"";
  position:absolute;
  inset:-25px;
  border-radius:50%;
  background:conic-gradient(var(--accent),transparent 40%,var(--accent));
  filter:blur(30px);
  opacity:.7;
  animation:spin 6s linear infinite;
  z-index:-1;
}
@keyframes spin{
  from{transform:rotate(0)}
  to{transform:rotate(360deg)}
}
.circle-number{
  font-size:52px;
  color:var(--accent);
  margin:20px 0;
}
.circle-box button{
  width:100%;
  padding:16px;
  font-size:22px;
  border:none;
  border-radius:14px;
  background:var(--accent);
  cursor:pointer;
}

/* Reader */
.reader{
  flex:1;
  overflow:auto;
  padding:20px;
  text-align:center;
  display:none;
}
.ayah{
  font-size:28px;
  line-height:2;
  margin-bottom:18px;
}

/* Footer */
.footer{
  display:flex;
  justify-content:space-between;
  padding:10px;
  border-top:1px solid var(--border);
  font-size:16px;
}
.footer span{font-weight:bold;color:var(--accent);}
@media(max-width:768px){
  .tasbeeh{flex-direction:column;gap:40px}
}
</style>
</head>
<body>
<div class="app">

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <h3>ğŸ“– Ø§Ù„Ø³ÙˆØ±</h3>
  <button onclick="showHome()">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <div id="surahList"></div>
</div>
<div class="overlay" id="overlay" onclick="closeMenu()"></div>

<!-- Content -->
<div class="content">
  <div class="header">
    <button class="menu-btn" onclick="toggleMenu()">â˜° Ø§Ù„Ø³ÙˆØ±</button>
    <button class="menu-btn" onclick="toggleTheme()">ğŸŒ™</button>
    <div class="header-title" id="title">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
  </div>

  <!-- Sticky Scroll Bar -->
  <div id="scrollBar">Ø§Ù„Ø¬Ø²Ø¡: <span id="juz-bar">-</span> | Ø§Ù„Ø­Ø²Ø¨: <span id="hizb-bar">-</span></div>

  <!-- Home -->
  <div class="home" id="home">
    <div class="tasbeeh">
      <div class="circle-box">
        <div class="circle-number" id="c1">0</div>
        <button onclick="inc('c1')">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</button>
      </div>
      <div class="circle-box">
        <div class="circle-number" id="c2">0</div>
        <button onclick="inc('c2')">Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡</button>
      </div>
      <div class="circle-box">
        <div class="circle-number" id="c3">0</div>
        <button onclick="inc('c3')">Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±</button>
      </div>
    </div>
  </div>

  <!-- Reader -->
  <div class="reader" id="reader"></div>

  <!-- Footer -->
  <div class="footer">
    <div>Ø§Ù„Ø­Ø²Ø¨: <span id="hizb">-</span></div>
    <div>Â© Ø²ÙŠØ§Ø¯ Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ</div>
    <div>Ø§Ù„Ø¬Ø²Ø¡: <span id="juz">-</span></div>
  </div>
</div>
</div>

<script>
/* ===== Tasbeeh ===== */
const max=33;
function inc(id){
  const el=document.getElementById(id);
  let v=+el.textContent;
  if(v<max) el.textContent=v+1;
}

/* ===== Menu & Theme ===== */
const sidebar=document.getElementById("sidebar");
const overlay=document.getElementById("overlay");
function toggleMenu(){
  sidebar.classList.toggle("open");
  overlay.classList.toggle("show");
}
function closeMenu(){
  sidebar.classList.remove("open");
  overlay.classList.remove("show");
}
function toggleTheme(){ document.body.classList.toggle("light"); }

/* ===== Load Surahs ===== */
const surahList=document.getElementById("surahList");
fetch("https://api.quran.com/api/v4/chapters?language=ar")
.then(r=>r.json())
.then(d=>{
  d.chapters.forEach(s=>{
    const div=document.createElement("div");
    div.className="surah-item";
    div.textContent=s.id+" - "+s.name_arabic;
    div.onclick=()=>loadSurah(s.id,s.name_arabic);
    surahList.appendChild(div);
  });
});

/* ===== Load Ayat ===== */
function loadSurah(id,name){
  document.getElementById("title").textContent=name;
  document.getElementById("home").style.display="none";
  closeMenu();
  const reader=document.getElementById("reader");
  reader.style.display="block";
  reader.innerHTML="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ§Øª...";

  fetch(`https://api.quran.com/api/v4/verses/by_chapter/${id}?fields=text_uthmani,juz_number,hizb_number,verse_number&per_page=300`)
  .then(r=>r.json())
  .then(d=>{
    reader.innerHTML="";
    d.verses.forEach(v=>{
      const a=document.createElement("div");
      a.className="ayah";
      a.dataset.juz=v.juz_number;
      a.dataset.hizb=v.hizb_number;
      a.innerHTML=`(${v.verse_number}) ${v.text_uthmani}`;
      reader.appendChild(a);
    });

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø²Ø¡ ÙˆØ§Ù„Ø­Ø²Ø¨ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¨Ø¯Ù‚Ø©
    reader.addEventListener('scroll',()=>{
      const ayahs=[...reader.children];
      let active = ayahs.reduce((closest, ayah)=>{
        const rect = ayah.getBoundingClientRect();
        const offset = Math.abs(rect.top - 100);
        return offset < closest.offset ? {ayah, offset} : closest;
      },{ayah:null, offset:Infinity}).ayah;

      if(active){
        document.getElementById('juz').textContent = active.dataset.juz;
        document.getElementById('hizb').textContent = active.dataset.hizb;
        document.getElementById('juz-bar').textContent = active.dataset.juz;
        document.getElementById('hizb-bar').textContent = active.dataset.hizb;
      }
    });
    reader.scroll({top:0,behavior:"smooth"});
  });
}

/* ===== Home ===== */
function showHome(){
  document.getElementById("title").textContent="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…";
  document.getElementById("reader").style.display="none";
  document.getElementById("home").style.display="flex";
  document.getElementById('juz').textContent='-';
  document.getElementById('hizb').textContent='-';
  document.getElementById('juz-bar').textContent='-';
  document.getElementById('hizb-bar').textContent='-';
}
</script>
</body>
</html>
