<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">

<style>
:root{
  --gold:#d4af37;
  --bg:#1e1e1e;
  --panel:#2b2b2b;
  --border:#444;
  --text:#f0f0f0;
  --highlight:#ffcc00;
}

/* ===== Base ===== */
body{margin:0;font-family:'Amiri',serif;background:var(--bg);color:var(--text);}
.app{display:flex;height:100vh;}
.content{flex:1;display:flex;flex-direction:column}

/* ===== Header ===== */
.header{
  padding:12px;
  display:flex;
  align-items:center;
  gap:10px;
  border-bottom:1px solid var(--border);
}
.menu-btn{
  display:none;
  font-size:20px;
  background:var(--highlight);
  border:none;
  border-radius:8px;
  padding:6px 10px;
  cursor:pointer;
}
.header-title{flex:1;text-align:center;font-size:22px;color:var(--highlight);}

/* ===== Sidebar ===== */
.sidebar{
  width:260px;
  background:var(--panel);
  border-left:1px solid var(--border);
  padding:15px;
  overflow:auto;
}
.sidebar h3{margin:10px 0;color:var(--gold)}
.sidebar input, .sidebar button{
  width:100%;padding:10px;border-radius:8px;border:none;
}
.sidebar button{background:var(--highlight);cursor:pointer;margin-bottom:10px}
.surah-item{padding:8px;border-bottom:1px solid var(--border);cursor:pointer}

/* ===== Reader ===== */
.reader{
  flex:1;
  overflow:auto;
  padding:15px;
  text-align:center;
}
.ayah{
  font-size:22px;
  line-height:2;
  margin-bottom:20px;
}

/* ===== Footer ===== */
.footer{
  display:flex;
  justify-content:space-between;
  padding:8px 12px;
  border-top:1px solid var(--border);
  font-size:14px;
}

/* ===== Mobile ===== */
@media(max-width:768px){
  .menu-btn{display:block}

  .sidebar{
    position:fixed;
    top:0;
    right:-100%;
    height:100vh;
    width:85%;
    z-index:999;
    transition:0.3s;
  }
  .sidebar.open{right:0}

  .ayah{
    font-size:20px;
    line-height:1.9;
  }
}
</style>
</head>

<body>
<div class="app">

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <h3>ğŸ” Ø§Ù„Ø¨Ø­Ø«</h3>
    <input id="search" placeholder="Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©">
    <button onclick="showHome()">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <div id="surahList"></div>
  </div>

  <!-- Content -->
  <div class="content">
    <div class="header">
      <button class="menu-btn" onclick="toggleMenu()">â˜°</button>
      <div class="header-title" id="title">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
    </div>

    <div class="reader" id="reader"></div>

    <div class="footer">
      <div>Ø§Ù„Ø¬Ø²Ø¡: <span id="juz">-</span></div>
      <div>Â© Ø²ÙŠØ§Ø¯ Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ</div>
      <div>Ø§Ù„Ø­Ø²Ø¨: <span id="hizb">-</span></div>
    </div>
  </div>
</div>

<script>
const sidebar = document.getElementById('sidebar');
function toggleMenu(){ sidebar.classList.toggle('open'); }

const reader = document.getElementById("reader");
const surahList = document.getElementById("surahList");
const search = document.getElementById("search");
const title = document.getElementById("title");

/* Load Surahs */
fetch("https://api.quran.com/api/v4/chapters?language=ar")
.then(res=>res.json())
.then(data=>{
  data.chapters.forEach(s=>{
    const d=document.createElement("div");
    d.className="surah-item";
    d.textContent=s.name_arabic;
    d.onclick=()=>loadSurah(s.id,s.name_arabic);
    surahList.appendChild(d);
  });
});

search.oninput=()=>{
  [...surahList.children].forEach(d=>{
    d.style.display = d.textContent.includes(search.value)?'block':'none';
  });
};

function loadSurah(id,name){
  title.textContent=name;
  sidebar.classList.remove('open');
  reader.innerHTML="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
  fetch(`https://api.quran.com/api/v4/verses/by_chapter/${id}?fields=text_uthmani,verse_number,juz_number,hizb_number&per_page=300`)
  .then(res=>res.json())
  .then(data=>{
    reader.innerHTML="";
    data.verses.forEach(v=>{
      const a=document.createElement("div");
      a.className="ayah";
      a.dataset.juz=v.juz_number;
      a.dataset.hizb=v.hizb_number;
      a.innerHTML=`(${v.verse_number}) ${v.text_uthmani}`;
      reader.appendChild(a);
    });
  });
}

function showHome(){
  title.textContent="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…";
  reader.innerHTML="";
  document.getElementById('juz').textContent='-';
  document.getElementById('hizb').textContent='-';
}

reader.addEventListener('scroll',()=>{
  const a=[...reader.children].find(x=>x.getBoundingClientRect().top>=70);
  if(a){
    juz.textContent=a.dataset.juz;
    hizb.textContent=a.dataset.hizb;
  }
});
</script>
</body>
</html>    <div class="header">
      <div class="header-title" id="title">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… ğŸ¤</div>
      <div style="display:flex;gap:10px;">
        <div class="font-controls">
          <button onclick="changeFontSize(2)">A+</button>
          <button onclick="changeFontSize(-2)">A-</button>
        </div>
        <button class="theme-button" id="themeToggleBtn">â˜€</button>
      </div>
    </div>

    <div class="bismillah" id="bismillah">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…</div>
    <div class="dua" id="dua">Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‚Ø±Ø§Ø¡ØªÙ†Ø§ Ù†ÙˆØ±Ù‹Ø§ Ù„Ù‡Ø¯Ø§ÙŠØ© Ù‚Ù„ÙˆØ¨Ù†Ø§ ğŸŒ™</div>

    <div class="circular-counters" id="circularCounters">
      <div class="circle-counter">
        <div class="circle-number" id="tasbeeh">0</div>
        <div class="glow-ring"></div>
        <button class="circle-button" onclick="increment('tasbeeh')">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</button>
      </div>
      <div class="circle-counter">
        <div class="circle-number" id="istighfar">0</div>
        <div class="glow-ring"></div>
        <button class="circle-button" onclick="increment('istighfar')">Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡</button>
      </div>
      <div class="circle-counter">
        <div class="circle-number" id="hawqala">0</div>
        <div class="glow-ring"></div>
        <button class="circle-button" onclick="increment('hawqala')">Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±</button>
      </div>
    </div>

    <div class="la-ilah" id="laIlah">Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡</div>
    <div class="reader" id="reader"></div>
<div class="footer">
  <div class="juz-hizb" style="text-align:right;">Ø§Ù„Ø¬Ø²Ø¡: <span id="juz">-</span></div>
  <div style="text-align:center;">Ø²ÙŠØ§Ø¯ Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ Â© 2026</div>
  <div class="juz-hizb" style="text-align:left;">Ø§Ù„Ø­Ø²Ø¨: <span id="hizb">-</span></div>
</div>

  </div>
</div>

<script>
let counts = { tasbeeh:0, istighfar:0, hawqala:0 };
const maxCount = 33;

function increment(type){
  if(counts[type]<maxCount){
    counts[type]++;
    document.getElementById(type).textContent = counts[type];
  }
  if(counts.tasbeeh===maxCount && counts.istighfar===maxCount && counts.hawqala===maxCount){
    document.getElementById('circularCounters').style.display = 'none';
    const laIlahDiv = document.getElementById('laIlah');
    laIlahDiv.style.opacity = 1;
    setTimeout(()=>{
      laIlahDiv.style.opacity = 0;
      counts = {tasbeeh:0, istighfar:0, hawqala:0};
      ['tasbeeh','istighfar','hawqala'].forEach(t=>document.getElementById(t).textContent=0);
      document.getElementById('circularCounters').style.display='flex';
    },3000);
  }
}

const reader = document.getElementById("reader");
const title = document.getElementById("title");
const surahList = document.getElementById("surahList");
const search = document.getElementById("search");
const bismillahDiv = document.getElementById("bismillah");
const duaDiv = document.getElementById("dua");
const juzHizbDiv = document.getElementById("juzHizb");
let fontSize = 28;

function changeFontSize(diff){
  fontSize += diff;
  document.querySelectorAll('.ayah').forEach(a=>a.style.fontSize = fontSize+'px');
}

async function loadSurahs(){
  const res = await fetch("https://api.quran.com/api/v4/chapters?language=ar");
  const data = await res.json();
  const surahs = data.chapters;
  surahList.innerHTML = "";
  surahs.forEach(s=>{
    const div=document.createElement("div");
    div.className="surah-item";
    div.textContent = s.name_arabic;
    div.onclick=()=>loadSurah(s.id,s.name_arabic);
    surahList.appendChild(div);
  });
}

search.oninput = () => {
  const value = search.value.trim();
  [...surahList.children].forEach(div=>{
    div.style.display = div.textContent.includes(value)?'block':'none';
  });
};

async function loadSurah(id,name){
  title.textContent = name;
  bismillahDiv.style.display = "none";
  duaDiv.style.display = "none";
  document.getElementById('circularCounters').style.display = "none";
  reader.innerHTML = "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ§Øª...";
  const res = await fetch(`https://api.quran.com/api/v4/verses/by_chapter/${id}?language=ar&fields=text_uthmani,verse_number,juz_number,hizb_number&per_page=300`);
  const data = await res.json();
  reader.innerHTML = "";
  data.verses.forEach((v,i)=>{
    const div=document.createElement("div");
    div.className="ayah";
    div.dataset.juz=v.juz_number;
    div.dataset.hizb=v.hizb_number;
    div.innerHTML=`<span class="ayah-number">(${v.verse_number})</span> ${v.text_uthmani}`;
    reader.appendChild(div);
    setTimeout(()=>div.classList.add("show"), i*20);
  });
  reader.scroll({top:0,behavior:"smooth"});
}

function showHome(){
  title.textContent = "Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… ğŸ¤";
  bismillahDiv.style.display = "block";
  duaDiv.style.display = "block";
  document.getElementById('circularCounters').style.display = "flex";
  reader.innerHTML = "";
  juzHizbDiv.textContent = "Ø§Ù„Ø¬Ø²Ø¡: - | Ø§Ù„Ø­Ø²Ø¨: -";
}

reader.addEventListener('scroll', ()=>{
  const ayahs = [...reader.children];
  let currentAyah = ayahs.find(a=>a.getBoundingClientRect().top >= 60);
  if(currentAyah){
    document.getElementById('juz').textContent = currentAyah.dataset.juz;
    document.getElementById('hizb').textContent = currentAyah.dataset.hizb;
  }
});


// Light/Dark mode
const root = document.documentElement;
let lightMode = false;
document.getElementById('themeToggleBtn').addEventListener('click', ()=>{
  lightMode = !lightMode;
  if(lightMode){
    // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­: Ø¨ÙŠØ¬ ØºØ§Ù…Ù‚ + Ø¨Ù†ÙŠ ØºØ§Ù…Ù‚
    root.style.setProperty('--bg','#e6d8c3');      
    root.style.setProperty('--panel','#8d6e63');   
    root.style.setProperty('--border','#5d4037');  
    root.style.setProperty('--text','#000');      // Ø§Ù„Ø®Ø· Ø£Ø³ÙˆØ¯ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­
    root.style.setProperty('--highlight','#bcaaa4'); 
    root.style.setProperty('--counter-bg','#8d6e63'); 
    root.style.setProperty('--counter-glow','#bcaaa4'); 

    document.querySelectorAll('.ayah').forEach(a => a.style.color = '#000'); // ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ§Øª
    document.getElementById('themeToggleBtn').textContent='ğŸŒ™';
}else{
    root.style.setProperty('--bg','#1e1e1e');
    root.style.setProperty('--panel','#2b2b2b');
    root.style.setProperty('--border','#444');
    root.style.setProperty('--text','#f0f0f0');
    root.style.setProperty('--highlight','#ffcc00');
    root.style.setProperty('--counter-bg','#2e2e2e');
    root.style.setProperty('--counter-glow','#ffcc00');

    document.querySelectorAll('.ayah').forEach(a => a.style.color = '#f0f0f0'); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£ØµÙ„ÙŠ
    document.getElementById('themeToggleBtn').textContent='â˜€';
}

});

loadSurahs();
</script>
</body>
</html>

